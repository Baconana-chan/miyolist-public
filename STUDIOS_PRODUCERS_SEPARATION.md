# –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ Studios –∏ Producers

## –ò–∑–º–µ–Ω–µ–Ω–∏—è (12 –æ–∫—Ç—è–±—Ä—è 2025)

### ‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω—ã —Å—Ç—É–¥–∏–∏ –Ω–∞ Studios (Main) –∏ Producers (Support)

**–ü—Ä–æ–±–ª–µ–º–∞:**  
–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –¥–µ—Ç–∞–ª–µ–π —Ç–∞–π—Ç–ª–∞ –≤—Å–µ —Å—Ç—É–¥–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏—Å—å –≤–º–µ—Å—Ç–µ –≤ –æ–¥–Ω–æ–π —Å–µ–∫—Ü–∏–∏ "Studios", –±–µ–∑ —Ä–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Å—Ç—É–¥–∏—è–º–∏ (main) –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–º–∏ (support/producers).

**–†–µ—à–µ–Ω–∏–µ:**  
–†–∞–∑–¥–µ–ª–∏–ª–∏ —Å—Ç—É–¥–∏–∏ –Ω–∞ –¥–≤–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–ª—è `isMain` –∏–∑ AniList API:
- **Studios** - –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—É–¥–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞–ª–∏ –Ω–∞–¥ –∞–Ω–∏–º–µ (isMain: true)
- **Producers** - –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å—Ç—É–¥–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥–∞–ª–∏ –≤ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ (isMain: false)

---

## –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. `lib/core/models/media_details.dart`

**–î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `isMain` –≤ –∫–ª–∞—Å—Å `MediaStudio`:**

```dart
@HiveType(typeId: 21)
class MediaStudio extends HiveObject {
  @HiveField(0)
  final int id;

  @HiveField(1)
  final String name;

  @HiveField(2)
  final bool isAnimationStudio;

  @HiveField(3)  // –ù–æ–≤–æ–µ –ø–æ–ª–µ
  final bool isMain;

  MediaStudio({
    required this.id,
    required this.name,
    required this.isAnimationStudio,
    this.isMain = true, // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é true –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
  });
}
```

**–û–±–Ω–æ–≤–ª—ë–Ω –º–µ—Ç–æ–¥ `_parseStudios`:**

- –ü–∞—Ä—Å–∏—Ç –ø–æ–ª–µ `edges` —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ `isMain`
- –°–≤—è–∑—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ `edges` —Å –ø–æ–ª–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ `nodes`
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ —Å—Ç–∞—Ä—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º

```dart
static List<MediaStudio>? _parseStudios(dynamic studiosData) {
  if (studiosData == null) return null;

  // –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞: –ø–∞—Ä—Å–∏–Ω–≥ edges —Å isMain
  if (studiosData is Map && studiosData.containsKey('edges')) {
    final edges = studiosData['edges'] as List<dynamic>?;
    if (edges != null) {
      for (var edge in edges) {
        final node = edge['node'];
        final isMain = edge['isMain'] as bool? ?? true;
        // ... —Å–æ–∑–¥–∞–Ω–∏–µ MediaStudio —Å isMain
      }
    }
  }
  
  // –°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
  // ...
}
```

---

### 2. `lib/core/services/anilist_service.dart`

**–û–±–Ω–æ–≤–ª–µ–Ω—ã GraphQL –∑–∞–ø—Ä–æ—Å—ã (3 –º–µ—Å—Ç–∞):**

–î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `edges` —Å `isMain` –≤ –∑–∞–ø—Ä–æ—Å—ã —Å—Ç—É–¥–∏–π:

```graphql
studios {
  nodes {
    id
    name
    isAnimationStudio
  }
  edges {
    isMain      # –ù–æ–≤–æ–µ –ø–æ–ª–µ
    node {
      id
    }
  }
}
```

**–ú–µ—Å—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
1. **–ó–∞–ø—Ä–æ—Å –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ** (—Å—Ç—Ä–æ–∫–∞ ~465)
2. **–ó–∞–ø—Ä–æ—Å –¥–µ—Ç–∞–ª–µ–π –º–µ–¥–∏–∞** (—Å—Ç—Ä–æ–∫–∞ ~540)
3. **–ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫** (—Å—Ç—Ä–æ–∫–∞ ~645)

---

### 3. `lib/features/media_details/presentation/pages/media_details_page.dart`

**–†–∞–∑–¥–µ–ª—ë–Ω UI –Ω–∞ –¥–≤–µ —Å–µ–∫—Ü–∏–∏:**

#### Studios (Main) - –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—É–¥–∏–∏

```dart
if (_media!.studios != null && 
    _media!.studios!.whereType<MediaStudio>().any((s) => s.isMain)) ...[
  Padding(
    padding: const EdgeInsets.only(bottom: 8),
    child: Row(
      children: [
        const Icon(Icons.business, color: AppTheme.textGray, size: 20),
        const SizedBox(width: 12),
        const Text('Studios: ', ...),
        Expanded(
          child: Wrap(
            children: _media!.studios!
                .whereType<MediaStudio>()
                .where((studio) => studio.isMain)
                .map((studio) => /* –°—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç—É–¥–∏—é */)
                .toList(),
          ),
        ),
      ],
    ),
  ),
]
```

#### Producers (Support) - –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å—Ç—É–¥–∏–∏

```dart
if (_media!.studios != null && 
    _media!.studios!.whereType<MediaStudio>().any((s) => !s.isMain)) ...[
  Padding(
    padding: const EdgeInsets.only(bottom: 8),
    child: Row(
      children: [
        const Icon(Icons.people, color: AppTheme.textGray, size: 20),
        const SizedBox(width: 12),
        const Text('Producers: ', ...),
        Expanded(
          child: Wrap(
            children: _media!.studios!
                .whereType<MediaStudio>()
                .where((studio) => !studio.isMain)
                .map((studio) => /* –°—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç—É–¥–∏—é */)
                .toList(),
          ),
        ),
      ],
    ),
  ),
]
```

**–û—Ç–ª–∏—á–∏—è:**
- Studios: –∏–∫–æ–Ω–∫–∞ `Icons.business` (üè¢)
- Producers: –∏–∫–æ–Ω–∫–∞ `Icons.people` (üë•)
- –ö–∞–∂–¥–∞—è —Å–µ–∫—Ü–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Å—Ç—É–¥–∏–∏

---

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –æ—Ç AniList API

```json
{
  "studios": {
    "nodes": [
      { "id": 1, "name": "Studio A", "isAnimationStudio": true },
      { "id": 2, "name": "Studio B", "isAnimationStudio": true },
      { "id": 3, "name": "Producer C", "isAnimationStudio": false }
    ],
    "edges": [
      { "isMain": true, "node": { "id": 1 } },      // –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—É–¥–∏—è
      { "isMain": true, "node": { "id": 2 } },      // –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—É–¥–∏—è
      { "isMain": false, "node": { "id": 3 } }      // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è
    ]
  }
}
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

```
üè¢ Studios: Studio A, Studio B
üë• Producers: Producer C
```

---

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–ü–æ–Ω—è—Ç–Ω–µ–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
- –ß—ë—Ç–∫–æ –≤–∏–¥–Ω–æ, –∫—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–æ–∑–¥–∞—Ç–µ–ª—å –∞–Ω–∏–º–µ
- –í–∏–¥–Ω–æ, –∫—Ç–æ –ø–æ–º–æ–≥–∞–ª –≤ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ

‚úÖ **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç AniList**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ API
- –¢–∞–∫–æ–µ –∂–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–∞–∫ –Ω–∞ —Å–∞–π—Ç–µ AniList

‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**
- –°—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –±–µ–∑ `isMain` –±—É–¥—É—Ç –ø–æ–∫–∞–∑–∞–Ω—ã –∫–∞–∫ Studios
- –ù–µ –ª–æ–º–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

‚úÖ **–í–∏–∑—É–∞–ª—å–Ω–æ–µ —Ä–∞–∑–ª–∏—á–∏–µ**
- –†–∞–∑–Ω—ã–µ –∏–∫–æ–Ω–∫–∏ (üè¢ vs üë•)
- –†–∞–∑–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ (Studios vs Producers)

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:

1. ‚úÖ –û—Ç–∫—Ä–æ–π—Ç–µ –∞–Ω–∏–º–µ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å—Ç—É–¥–∏—è–º–∏
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—É–¥–∏–∏ –≤ —Å–µ–∫—Ü–∏–∏ "Studios"
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –≤ —Å–µ–∫—Ü–∏–∏ "Producers"
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ–±–µ —Å–µ–∫—Ü–∏–∏ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã
5. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–≤–∏–≥–∞—Ü–∏—é –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å—Ç—É–¥–∏–∏
6. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ä—ã–µ –∞–Ω–∏–º–µ (—Å –∫—ç—à–µ–º –±–µ–∑ isMain)

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:

**–°—Ü–µ–Ω–∞—Ä–∏–π 1: –ê–Ω–∏–º–µ —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–º–∏ —Å—Ç—É–¥–∏—è–º–∏**
- –û–∂–∏–¥–∞–Ω–∏–µ: –î–≤–µ —Å–µ–∫—Ü–∏–∏ - Studios –∏ Producers
- –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ

**–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ê–Ω–∏–º–µ —Ç–æ–ª—å–∫–æ —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Å—Ç—É–¥–∏—è–º–∏**
- –û–∂–∏–¥–∞–Ω–∏–µ: –¢–æ–ª—å–∫–æ —Å–µ–∫—Ü–∏—è Studios
- –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ

**–°—Ü–µ–Ω–∞—Ä–∏–π 3: –ê–Ω–∏–º–µ —Ç–æ–ª—å–∫–æ —Å–æ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–º–∏ —Å—Ç—É–¥–∏—è–º–∏**
- –û–∂–∏–¥–∞–Ω–∏–µ: –¢–æ–ª—å–∫–æ —Å–µ–∫—Ü–∏—è Producers
- –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ

**–°—Ü–µ–Ω–∞—Ä–∏–π 4: –°—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫—ç—à–∞ (–±–µ–∑ isMain)**
- –û–∂–∏–¥–∞–Ω–∏–µ: –í—Å–µ —Å—Ç—É–¥–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∫–∞–∫ Studios (isMain = true –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### Hive Migration

**–í–Ω–∏–º–∞–Ω–∏–µ:** –ü–æ–ª–µ `@HiveField(3)` –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `HiveType(typeId: 21)`.

- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- –ù–æ–≤–æ–µ –ø–æ–ª–µ `isMain` –±—É–¥–µ—Ç `true` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª–µ –∑–∞–ø–æ–ª–Ω–∏—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏

### GraphQL API

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**
- `studios.edges[].isMain` - —Ñ–ª–∞–≥ –æ—Å–Ω–æ–≤–Ω–æ–π —Å—Ç—É–¥–∏–∏
- `studios.nodes[]` - –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å—Ç—É–¥–∏–π

**–ü–æ—á–µ–º—É –¥–≤–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞:**
- `edges` —Å–æ–¥–µ—Ä–∂–∏—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (isMain)
- `nodes` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é (name, isAnimationStudio)
- –°–≤—è–∑—ã–≤–∞–µ–º –ø–æ `id`

---

**–î–∞—Ç–∞:** 12 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** v1.5.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
