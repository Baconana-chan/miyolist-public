# Enhanced Chart Export with Styled Background

## ğŸ“‹ Overview
Ğ£Ğ»ÑƒÑ‡ÑˆĞµĞ½Ğ½Ñ‹Ğ¹ ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚ Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ¾Ğ² ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ¸ Ñ Ğ¿Ñ€Ğ¾Ñ„ĞµÑÑĞ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼ Ğ¾Ñ„Ğ¾Ñ€Ğ¼Ğ»ĞµĞ½Ğ¸ĞµĞ¼ - Ñ‚Ñ‘Ğ¼Ğ½Ñ‹Ğ¹ Ñ„Ğ¾Ğ½, Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº Ñ Ğ³Ñ€Ğ°Ğ´Ğ¸ĞµĞ½Ñ‚Ğ¾Ğ¼, Ğ¸ Ğ±Ñ€ĞµĞ½Ğ´Ğ¸Ğ½Ğ³ "Made with MiyoList ğŸ“Š".

## âœ¨ Features
- **Dark Background (#1A1A1A)**: Ğ¢Ñ‘Ğ¼Ğ½Ñ‹Ğ¹ Ñ„Ğ¾Ğ½ Ğ´Ğ»Ñ Ğ»ÑƒÑ‡ÑˆĞµĞ¹ Ñ‡Ğ¸Ñ‚Ğ°ĞµĞ¼Ğ¾ÑÑ‚Ğ¸ Ñ‚ĞµĞºÑÑ‚Ğ°
- **Gradient Header**: Ğ¡Ğ¸Ğ½Ğ¸Ğ¹ Ğ³Ñ€Ğ°Ğ´Ğ¸ĞµĞ½Ñ‚ (Color(0xFF2196F3) â†’ Color(0xFF1976D2))
- **Title & Subtitle**: ĞšÑ€ÑƒĞ¿Ğ½Ñ‹Ğ¹ Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº (48px) Ğ¸ Ğ¿Ğ¾Ğ´Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº Ñ Ğ´Ğ°Ñ‚Ğ¾Ğ¹ (28px)
- **Content Padding**: 10% Ğ¾Ñ‚ÑÑ‚ÑƒĞ¿Ñ‹ Ğ¿Ğ¾ Ğ±Ğ¾ĞºĞ°Ğ¼, 50px ÑĞ²ĞµÑ€Ñ…Ñƒ Ğ¾Ñ‚ header
- **Footer Branding**: "Made with MiyoList ğŸ“Š" Ğ² footer
- **High Resolution**: 3x pixel ratio Ğ´Ğ»Ñ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚Ğ°
- **Auto Date**: ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ´Ğ°Ñ‚Ğ° Ğ² Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğµ "MMMM dd, yyyy"

## ğŸ¨ Export Layout
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Gradient Header (150px)           â”‚
â”‚    Title (48px bold white)         â”‚
â”‚    Date (28px white 90%)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Content with padding (50px top)   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                              â”‚  â”‚
â”‚  â”‚   Original Chart Content     â”‚  â”‚
â”‚  â”‚   (Full statistics widget)   â”‚  â”‚
â”‚  â”‚                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Footer (100px)                    â”‚
â”‚  "Made with MiyoList ğŸ“Š"           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ Dimensions
- **Width**: Content width + 10% padding
- **Height**: Content height + 300px (150px header + 50px spacing + 100px footer)
- **Resolution**: 3x pixel ratio (default)

## ğŸ¯ Tab Titles
Each tab has a specific title:
- **Overview Tab**: "MiyoList Statistics Overview"
- **Activity Tab**: "Activity History"
- **Anime Tab**: "Anime Statistics"
- **Manga Tab**: "Manga Statistics"
- **Timeline Tab**: "Watching Timeline"

## ğŸ“Š Methods

### captureWidgetWithBackground()
```dart
Future<String?> captureWidgetWithBackground({
  required GlobalKey key,
  required String filename,
  String? title,
  String? subtitle,
  double pixelRatio = 3.0,
})
```

**Parameters:**
- `key`: GlobalKey of the RepaintBoundary widget
- `filename`: Base filename (without extension)
- `title`: Title text (if null, no title shown)
- `subtitle`: Subtitle text (if null, shows current date)
- `pixelRatio`: Image resolution multiplier (default: 3.0)

**Returns:** Filepath to saved PNG or null on error

**Usage:**
```dart
final filepath = await _exportService.captureWidgetWithBackground(
  key: _overviewKey,
  filename: 'miyolist_overview',
  title: 'MiyoList Statistics Overview',
  pixelRatio: 3.0,
);
```

### captureAndShareWidgetWithBackground()
```dart
Future<bool> captureAndShareWidgetWithBackground({
  required GlobalKey key,
  required String filename,
  String? title,
  String? subtitle,
  String? text,
  double pixelRatio = 3.0,
})
```

**Parameters:**
- Same as `captureWidgetWithBackground()` plus:
- `text`: Share dialog message (default: "Check out my MiyoList statistics! ğŸ“Š")

**Returns:** `true` if shared successfully, `false` otherwise

**Usage:**
```dart
final success = await _exportService.captureAndShareWidgetWithBackground(
  key: _animeKey,
  filename: 'miyolist_anime',
  title: 'Anime Statistics',
  text: 'My anime statistics ğŸ“º',
  pixelRatio: 3.0,
);
```

## ğŸ¨ Color Scheme
```dart
Background: Color(0xFF1A1A1A)
Gradient Start: Color(0xFF2196F3)
Gradient End: Color(0xFF1976D2)
Title: Colors.white (bold)
Subtitle: Colors.white.withOpacity(0.9)
Footer: Colors.white.withOpacity(0.7)
```

## ğŸ“± Platform Support
- **Windows**: Saves to `%USERPROFILE%\Downloads`
- **Android**: Saves to `/storage/emulated/0/Download`
- **Other**: Saves to app documents directory

## ğŸ”„ Integration
Updated in `statistics_page.dart`:
- `_exportCurrentTab()`: Uses `captureWidgetWithBackground()`
- `_shareCurrentTab()`: Uses `captureAndShareWidgetWithBackground()`

## ğŸ“ File Naming
Format: `{filename}_{timestamp}.png`
- Timestamp: ISO 8601 format with colons replaced by dashes
- Example: `miyolist_overview_2024-01-15T12-30-45.png`

## ğŸ¯ Usage Flow
1. User taps **Download** button in AppBar
2. Shows loading SnackBar with spinner
3. Waits 300ms for chart to fully render
4. Captures widget with styled background
5. Shows success SnackBar with filepath
6. User can tap **SHARE** button to share via system dialog

## âœ… Benefits
- **Better Readability**: Dark background ensures text visibility on any surface
- **Professional Look**: Gradient header and branding add polish
- **User-Friendly**: Dates and titles provide context
- **Shareable**: Perfect for social media (Discord, Twitter, Reddit)
- **High Quality**: 3x resolution ensures crisp images
- **Consistent Branding**: "Made with MiyoList" promotes the app

## ğŸ”œ Future Enhancements
- [ ] Add username to header (e.g., "@username's Statistics")
- [ ] Add small MiyoList logo/avatar
- [ ] Theme selection (Light/Dark backgrounds)
- [ ] Custom colors for branding
- [ ] Export multiple tabs as collage
- [ ] PDF export option

## ğŸ“¦ Dependencies
- `dart:ui` (Canvas, ParagraphBuilder)
- `intl` (DateFormat)
- `path_provider` (Directory paths)
- `share_plus` (Sharing functionality)

---

**Last Updated**: v1.1.0 (Botan ç‰¡ä¸¹)
**Feature Status**: âœ… Complete and Tested
