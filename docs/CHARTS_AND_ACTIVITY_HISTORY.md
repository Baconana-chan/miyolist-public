# Charts and Activity History - v1.1.0 "Botan (Áâ°‰∏π)"

**Status:** In Development  
**Target Release:** v1.1.0 "Botan" (Green - growth and progress)  
**Started:** October 15, 2025  
**Dependencies:** fl_chart ^0.68.0

---

## üìä Overview

–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–∏–∑—É–∞–ª—å–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –∏—Å—Ç–æ—Ä–∏–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –í–∫–ª—é—á–∞–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ –∏ GitHub-style contribution graph.

---

## üéØ Features

### 1. Charts and Graphs

#### Genre Distribution Pie Chart
- **–¶–µ–ª—å:** –ü–æ–∫–∞–∑–∞—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø–æ –∂–∞–Ω—Ä–∞–º
- **–¢–∏–ø –≥—Ä–∞—Ñ–∏–∫–∞:** Pie Chart (–∫—Ä—É–≥–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞)
- **–î–∞–Ω–Ω—ã–µ:**
  - –¢–æ–ø-10 –∂–∞–Ω—Ä–æ–≤ –∏–∑ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - –ü—Ä–æ—Ü–µ–Ω—Ç–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∞–π—Ç–ª–æ–≤ –≤ –∂–∞–Ω—Ä–µ
- **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:**
  - Hover tooltip —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –∂–∞–Ω—Ä–∞ –∏ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–º
  - Tap –Ω–∞ —Å–µ–∫—Ç–æ—Ä –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å–ø–∏—Å–∫–∞ –ø–æ –∂–∞–Ω—Ä—É
  - –õ–µ–≥–µ–Ω–¥–∞ —Å —Ü–≤–µ—Ç–∞–º–∏ –∂–∞–Ω—Ä–æ–≤
- **–¶–≤–µ—Ç–∞:** –†–∞–∑–Ω—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∂–∞–Ω—Ä–∞

#### Score Distribution Histogram
- **–¶–µ–ª—å:** –ü–æ–∫–∞–∑–∞—Ç—å –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∞–Ω–∏–º–µ/–º–∞–Ω–≥—É
- **–¢–∏–ø –≥—Ä–∞—Ñ–∏–∫–∞:** Bar Chart (—Å—Ç–æ–ª–±—á–∞—Ç–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞)
- **–î–∞–Ω–Ω—ã–µ:**
  - –û—Å—å X: –û—Ü–µ–Ω–∫–∏ –æ—Ç 0 –¥–æ 10 (—Å —à–∞–≥–æ–º 0.5 –∏–ª–∏ 1.0)
  - –û—Å—å Y: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∞–π—Ç–ª–æ–≤ —Å –¥–∞–Ω–Ω–æ–π –æ—Ü–µ–Ω–∫–æ–π
  - –û—Ç–¥–µ–ª—å–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ –¥–ª—è anime –∏ manga
- **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:**
  - Hover tooltip —Å —Ç–æ—á–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º
  - Tap –Ω–∞ —Å—Ç–æ–ª–±–µ—Ü –¥–ª—è —Å–ø–∏—Å–∫–∞ —Ç–∞–π—Ç–ª–æ–≤ —Å —ç—Ç–æ–π –æ—Ü–µ–Ω–∫–æ–π
  - –°—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞ –ª–∏–Ω–∏–µ–π
- **–¶–≤–µ—Ç–∞:** –ì—Ä–∞–¥–∏–µ–Ω—Ç –æ—Ç –∫—Ä–∞—Å–Ω–æ–≥–æ (–Ω–∏–∑–∫–∏–µ –æ—Ü–µ–Ω–∫–∏) –¥–æ –∑–µ–ª–µ–Ω–æ–≥–æ (–≤—ã—Å–æ–∫–∏–µ)

#### Watching History Timeline
- **–¶–µ–ª—å:** –ü–æ–∫–∞–∑–∞—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø–æ –º–µ—Å—è—Ü–∞–º/–≥–æ–¥–∞–º
- **–¢–∏–ø –≥—Ä–∞—Ñ–∏–∫–∞:** Line Chart (–ª–∏–Ω–µ–π–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫)
- **–î–∞–Ω–Ω—ã–µ:**
  - –û—Å—å X: –ú–µ—Å—è—Ü—ã/–≥–æ–¥—ã
  - –û—Å—å Y: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö —Ç–∞–π—Ç–ª–æ–≤
  - –û—Ç–¥–µ–ª—å–Ω—ã–µ –ª–∏–Ω–∏–∏ –¥–ª—è anime –∏ manga
- **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:**
  - Hover tooltip —Å –¥–∞—Ç–æ–π –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º
  - Zoom in/out –ø–æ –æ—Å–∏ X
  - Switch –º–µ–∂–¥—É monthly –∏ yearly view
- **–¶–≤–µ—Ç–∞:** –°–∏–Ω–∏–π –¥–ª—è anime, –∫—Ä–∞—Å–Ω—ã–π –¥–ª—è manga

#### Monthly Activity Heatmap
- **–¶–µ–ª—å:** –ü–æ–∫–∞–∑–∞—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ –¥–Ω—è–º –º–µ—Å—è—Ü–∞
- **–¢–∏–ø –≥—Ä–∞—Ñ–∏–∫–∞:** Heatmap (—Ç–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞)
- **–î–∞–Ω–Ω—ã–µ:**
  - 7 —Å—Ç—Ä–æ–∫ (–¥–Ω–∏ –Ω–µ–¥–µ–ª–∏: Mon-Sun)
  - ~5 –∫–æ–ª–æ–Ω–æ–∫ (–Ω–µ–¥–µ–ª–∏ –º–µ—Å—è—Ü–∞)
  - –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å —Ü–≤–µ—Ç–∞ = –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–µ–π—Å—Ç–≤–∏–π
- **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:**
  - Hover tooltip —Å –¥–∞—Ç–æ–π –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –¥–µ–π—Å—Ç–≤–∏–π
  - Month selector
- **–¶–≤–µ—Ç–∞:** –û—Ç —Å–≤–µ—Ç–ª–æ–≥–æ –∫ —Ç–µ–º–Ω–æ–º—É (0-4+ –¥–µ–π—Å—Ç–≤–∏–π)

#### Format Distribution
- **–¶–µ–ª—å:** –ü–æ–∫–∞–∑–∞—Ç—å –∫–∞–∫–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç (TV, Movie, OVA, etc.)
- **–¢–∏–ø –≥—Ä–∞—Ñ–∏–∫–∞:** Horizontal Bar Chart
- **–î–∞–Ω–Ω—ã–µ:**
  - –§–æ—Ä–º–∞—Ç—ã: TV, Movie, OVA, ONA, Special, Music
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∞–π—Ç–ª–æ–≤ –∫–∞–∂–¥–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞
- **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:**
  - Hover tooltip
  - Tap –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

#### Studio Distribution
- **–¶–µ–ª—å:** –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ø-10 —Å—Ç—É–¥–∏–π –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã—Ö —Ç–∞–π—Ç–ª–æ–≤
- **–¢–∏–ø –≥—Ä–∞—Ñ–∏–∫–∞:** Horizontal Bar Chart
- **–î–∞–Ω–Ω—ã–µ:**
  - –¢–æ–ø-10 —Å—Ç—É–¥–∏–π
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∞–π—Ç–ª–æ–≤ –æ—Ç –∫–∞–∂–¥–æ–π —Å—Ç—É–¥–∏–∏
- **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:**
  - Hover tooltip —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º —Å—Ç—É–¥–∏–∏
  - Tap –Ω–∞ —Å—Ç—É–¥–∏—é –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è StudioDetailsPage

---

### 2. Activity History (GitHub-style)

#### Year-long Contribution Graph
- **–¶–µ–ª—å:** –ü–æ–∫–∞–∑–∞—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∑–∞ –≥–æ–¥
- **–î–∏–∑–∞–π–Ω:** GitHub contribution graph
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
  ```
  Jan  Feb  Mar  Apr  May  Jun  Jul  Aug  Sep  Oct  Nov  Dec
  M  ‚ñë ‚ñë ‚ñì ‚ñë ‚ñà ‚ñë ‚ñë ‚ñë ‚ñì ‚ñë ‚ñë ‚ñë ...  (365 —è—á–µ–µ–∫)
  W  ‚ñë ‚ñì ‚ñë ‚ñë ‚ñë ‚ñë ‚ñì ‚ñë ‚ñë ‚ñë ‚ñë ‚ñë ...
  F  ‚ñë ‚ñë ‚ñë ‚ñë ‚ñì ‚ñë ‚ñë ‚ñë ‚ñë ‚ñë ‚ñë ‚ñë ...
  ```
- **–î–∞–Ω–Ω—ã–µ:**
  - 365 –¥–Ω–µ–π (–∏–ª–∏ 366 –¥–ª—è –≤–∏—Å–æ–∫–æ—Å–Ω–æ–≥–æ –≥–æ–¥–∞)
  - –ö–∞–∂–¥–∞—è —è—á–µ–π–∫–∞ = 1 –¥–µ–Ω—å
  - –¶–≤–µ—Ç –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥–µ–π—Å—Ç–≤–∏–π:
    - –£—Ä–æ–≤–µ–Ω—å 0: –ù–µ—Ç –¥–µ–π—Å—Ç–≤–∏–π (—Å–µ—Ä—ã–π/–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π)
    - –£—Ä–æ–≤–µ–Ω—å 1: 1-2 –¥–µ–π—Å—Ç–≤–∏—è (—Å–≤–µ—Ç–ª—ã–π)
    - –£—Ä–æ–≤–µ–Ω—å 2: 3-5 –¥–µ–π—Å—Ç–≤–∏–π (—Å—Ä–µ–¥–Ω–∏–π)
    - –£—Ä–æ–≤–µ–Ω—å 3: 6-10 –¥–µ–π—Å—Ç–≤–∏–π (—Ç–µ–º–Ω—ã–π)
    - –£—Ä–æ–≤–µ–Ω—å 4: 11+ –¥–µ–π—Å—Ç–≤–∏–π (—Å–∞–º—ã–π —Ç–µ–º–Ω—ã–π)

#### Tracked Activities
–û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:
1. **Added to list** - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–∞–π—Ç–ª–∞ –≤ —Å–ø–∏—Å–æ–∫
2. **Updated progress** - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ (—ç–ø–∏–∑–æ–¥—ã/–≥–ª–∞–≤—ã)
3. **Changed status** - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ (Watching ‚Üí Completed)
4. **Updated score** - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏
5. **Added to favorites** - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
6. **Removed from favorites** - –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
7. **Custom list modification** - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤
8. **Notes updated** - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–æ–∫

#### Interactive Features
- **Hover tooltip:**
  ```
  October 15, 2025
  5 actions on this day
  - Updated progress: 3
  - Changed status: 1
  - Updated score: 1
  ```
- **Click on day:** –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–∏–∞–ª–æ–≥ —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–µ–π –¥–µ–π—Å—Ç–≤–∏–π
- **Year selector:** Dropdown –¥–ª—è –≤—ã–±–æ—Ä–∞ –≥–æ–¥–∞ (2024, 2025, etc.)
- **Statistics:**
  - Total activity count for year
  - Current streak (consecutive days with activity)
  - Longest streak
  - Most active day/week/month
  - Average actions per day
- **Color scheme:** –°–ª–µ–¥—É–µ—Ç —Ü–≤–µ—Ç–∞–º —Ç–µ–∫—É—â–µ–π —Ç–µ–º—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

#### Activity Detail Dialog
–ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –¥–µ–Ω—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –¥–∏–∞–ª–æ–≥:
```
Activity on October 15, 2025 (5 actions)

Updated Progress (3)
  ‚Ä¢ Attack on Titan - Episode 15 ‚Üí 16
  ‚Ä¢ One Piece - Episode 1089 ‚Üí 1090
  ‚Ä¢ Demon Slayer - Chapter 45 ‚Üí 46

Changed Status (1)
  ‚Ä¢ Jujutsu Kaisen: Watching ‚Üí Completed

Updated Score (1)
  ‚Ä¢ Spy x Family: 8.5 ‚Üí 9.0
```

---

## üèóÔ∏è Implementation Plan

### Phase 1: Data Collection & Storage (1-2 days)

#### 1.1 Create Activity Model
```dart
@HiveType(typeId: 10)
class ActivityEntry extends HiveObject {
  @HiveField(0)
  final int id;
  
  @HiveField(1)
  final DateTime timestamp;
  
  @HiveField(2)
  final String activityType; // 'added', 'progress', 'status', 'score', etc.
  
  @HiveField(3)
  final int mediaId;
  
  @HiveField(4)
  final String mediaTitle;
  
  @HiveField(5)
  final String? mediaType; // 'ANIME', 'MANGA'
  
  @HiveField(6)
  final Map<String, dynamic>? details; // Old/new values
  
  ActivityEntry({...});
}
```

#### 1.2 Activity Tracking Service
```dart
class ActivityTrackingService {
  final LocalStorageService _localStorage;
  
  // Log activity when user performs action
  Future<void> logActivity({
    required String activityType,
    required int mediaId,
    required String mediaTitle,
    Map<String, dynamic>? details,
  }) async {
    final activity = ActivityEntry(...);
    await _localStorage.saveActivity(activity);
  }
  
  // Get activities for date range
  Future<List<ActivityEntry>> getActivities({
    DateTime? startDate,
    DateTime? endDate,
  }) async {...}
  
  // Get activity count per day for heatmap
  Future<Map<DateTime, int>> getActivityHeatmapData(int year) async {...}
}
```

#### 1.3 Integrate Activity Logging
–î–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤—ã `logActivity()` –≤–æ –≤—Å–µ –º–µ—Å—Ç–∞, –≥–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è:
- `updateMediaListEntry()` –≤ AniListService
- `saveUserFavorites()` –≤ LocalStorageService
- Custom list operations
- etc.

---

### Phase 2: Charts Implementation (3-4 days)

#### 2.1 Add fl_chart Dependency
```yaml
dependencies:
  fl_chart: ^0.68.0
```

#### 2.2 Create Statistics Service
```dart
class StatisticsService {
  // Genre distribution
  Future<Map<String, int>> getGenreDistribution({String? type}) async {...}
  
  // Score distribution
  Future<Map<double, int>> getScoreDistribution({String? type}) async {...}
  
  // Watching timeline (monthly)
  Future<Map<DateTime, int>> getMonthlyTimeline({String? type}) async {...}
  
  // Format distribution
  Future<Map<String, int>> getFormatDistribution({String? type}) async {...}
  
  // Studio distribution (top 10)
  Future<List<StudioStat>> getTopStudios({int limit = 10}) async {...}
}
```

#### 2.3 Create Chart Widgets

**Genre Pie Chart Widget:**
```dart
class GenrePieChart extends StatelessWidget {
  final Map<String, int> genreData;
  
  @override
  Widget build(BuildContext context) {
    return PieChart(
      PieChartData(
        sections: _buildSections(),
        sectionsSpace: 2,
        centerSpaceRadius: 40,
        ...
      ),
    );
  }
}
```

**Score Histogram Widget:**
```dart
class ScoreHistogram extends StatelessWidget {
  final Map<double, int> scoreData;
  
  @override
  Widget build(BuildContext context) {
    return BarChart(
      BarChartData(
        barGroups: _buildBarGroups(),
        titlesData: _buildTitles(),
        ...
      ),
    );
  }
}
```

**Timeline Chart Widget:**
```dart
class TimelineChart extends StatelessWidget {
  final Map<DateTime, int> timelineData;
  
  @override
  Widget build(BuildContext context) {
    return LineChart(
      LineChartData(
        lineBarsData: _buildLines(),
        titlesData: _buildTitles(),
        ...
      ),
    );
  }
}
```

#### 2.4 Create Charts Page
```dart
class ChartsPage extends StatefulWidget {
  @override
  State<ChartsPage> createState() => _ChartsPageState();
}

class _ChartsPageState extends State<ChartsPage> {
  String _selectedType = 'ANIME'; // ANIME, MANGA, ALL
  
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Statistics & Charts'),
        actions: [
          // Type filter dropdown
        ],
      ),
      body: SingleChildScrollView(
        child: Column(
          children: [
            // Genre Distribution
            _buildChartSection(
              title: 'Genre Distribution',
              chart: GenrePieChart(...),
            ),
            
            // Score Distribution
            _buildChartSection(
              title: 'Score Distribution',
              chart: ScoreHistogram(...),
            ),
            
            // Watching Timeline
            _buildChartSection(
              title: 'Watching History',
              chart: TimelineChart(...),
            ),
            
            // Format Distribution
            _buildChartSection(
              title: 'Format Distribution',
              chart: FormatBarChart(...),
            ),
            
            // Top Studios
            _buildChartSection(
              title: 'Top Studios',
              chart: StudioBarChart(...),
            ),
          ],
        ),
      ),
    );
  }
}
```

---

### Phase 3: Activity History Heatmap (3-4 days)

#### 3.1 Create Heatmap Widget
```dart
class ActivityHeatmap extends StatelessWidget {
  final int year;
  final Map<DateTime, int> activityData;
  final Function(DateTime) onDayTap;
  
  @override
  Widget build(BuildContext context) {
    return CustomPaint(
      painter: HeatmapPainter(
        year: year,
        activityData: activityData,
        colorScheme: _getColorScheme(),
      ),
      child: GestureDetector(
        onTapDown: _handleTap,
      ),
    );
  }
}
```

#### 3.2 Create Heatmap Painter
```dart
class HeatmapPainter extends CustomPainter {
  final int year;
  final Map<DateTime, int> activityData;
  final List<Color> colorScheme;
  
  @override
  void paint(Canvas canvas, Size size) {
    // Draw month labels
    _drawMonthLabels(canvas);
    
    // Draw week day labels (Mon, Wed, Fri)
    _drawWeekDayLabels(canvas);
    
    // Draw 365 cells
    for (int day = 0; day < 365; day++) {
      final date = _getDateForDay(day);
      final activityCount = activityData[date] ?? 0;
      final color = _getColorForCount(activityCount);
      
      _drawCell(canvas, day, color);
    }
  }
  
  Color _getColorForCount(int count) {
    if (count == 0) return colorScheme[0]; // Level 0
    if (count <= 2) return colorScheme[1]; // Level 1
    if (count <= 5) return colorScheme[2]; // Level 2
    if (count <= 10) return colorScheme[3]; // Level 3
    return colorScheme[4]; // Level 4+
  }
}
```

#### 3.3 Create Activity History Page
```dart
class ActivityHistoryPage extends StatefulWidget {
  @override
  State<ActivityHistoryPage> createState() => _ActivityHistoryPageState();
}

class _ActivityHistoryPageState extends State<ActivityHistoryPage> {
  int _selectedYear = DateTime.now().year;
  Map<DateTime, int> _activityData = {};
  
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Activity History'),
        actions: [
          // Year selector dropdown
        ],
      ),
      body: Column(
        children: [
          // Statistics Cards
          _buildStatsRow(),
          
          // Activity Heatmap
          ActivityHeatmap(
            year: _selectedYear,
            activityData: _activityData,
            onDayTap: _showDayDetails,
          ),
          
          // Legend
          _buildLegend(),
          
          // Recent Activity List
          Expanded(
            child: _buildRecentActivityList(),
          ),
        ],
      ),
    );
  }
  
  Widget _buildStatsRow() {
    return Row(
      children: [
        _buildStatCard('Total Activity', '234'),
        _buildStatCard('Current Streak', '5 days'),
        _buildStatCard('Longest Streak', '23 days'),
      ],
    );
  }
}
```

#### 3.4 Create Activity Detail Dialog
```dart
class ActivityDetailDialog extends StatelessWidget {
  final DateTime date;
  final List<ActivityEntry> activities;
  
  @override
  Widget build(BuildContext context) {
    return AlertDialog(
      title: Text('Activity on ${_formatDate(date)}'),
      content: SingleChildScrollView(
        child: Column(
          children: activities.map((activity) {
            return _buildActivityTile(activity);
          }).toList(),
        ),
      ),
    );
  }
}
```

---

### Phase 4: Integration & Polish (2-3 days)

#### 4.1 Add Navigation
- Add "Charts" button to Statistics page
- Add "Activity" tab to Profile page
- Deep linking support

#### 4.2 Export Features
- Export chart as PNG image
- Export activity data as CSV
- Share activity graph on social media

#### 4.3 Performance Optimization
- Cache chart data
- Lazy load old activity data
- Optimize heatmap rendering

#### 4.4 Testing
- Test with large datasets (2000+ entries)
- Test with empty data
- Test year transitions
- Test different themes

---

## üì¶ Dependencies

```yaml
dependencies:
  fl_chart: ^0.68.0  # Charts library
  intl: ^0.18.0      # Date formatting (already installed)
  path_provider: ^2.1.0  # For cache (already installed)
```

---

## üé® UI/UX Design

### Color Schemes

**Activity Heatmap Levels (Dark Theme):**
- Level 0: `Color(0xFF1E1E1E)` - No activity (dark gray)
- Level 1: `Color(0xFF0D4429)` - Light activity (light green)
- Level 2: `Color(0xFF006D32)` - Medium activity (medium green)
- Level 3: `Color(0xFF26A641)` - High activity (bright green)
- Level 4: `Color(0xFF39D353)` - Very high activity (vibrant green)

**Activity Heatmap Levels (Light Theme):**
- Level 0: `Color(0xFFEBEDF0)` - No activity (light gray)
- Level 1: `Color(0xFF9BE9A8)` - Light activity
- Level 2: `Color(0xFF40C463)` - Medium activity
- Level 3: `Color(0xFF30A14E)` - High activity
- Level 4: `Color(0xFF216E39)` - Very high activity

**Chart Colors:**
- Primary: `AppTheme.accentBlue` (#457B9D)
- Secondary: `AppTheme.accentRed` (#E63946)
- Accent: `AppTheme.accentGold` (#FFC107)

---

## ‚úÖ Success Criteria

- [ ] All 6 chart types implemented and working
- [ ] Activity heatmap displays 365 days correctly
- [ ] Activity tracking logs all user actions
- [ ] Tooltips show accurate data on hover
- [ ] Year selector works for multiple years
- [ ] Statistics cards show correct counts
- [ ] Export features working (PNG, CSV)
- [ ] Performance optimized for large datasets
- [ ] Responsive design for desktop and mobile
- [ ] Follows app theme colors
- [ ] No memory leaks or performance issues

---

## üìù Notes

### Technical Considerations
- Use `fl_chart` for charts (well-maintained, performant)
- Custom `CustomPainter` for heatmap (better control)
- Cache chart data to avoid recalculation
- Use `Isolate` for heavy calculations if needed

### Future Enhancements (v1.2.0+)
- Animated chart transitions
- More chart types (radar, scatter)
- Comparison with other users
- Activity badges/achievements
- Weekly/monthly email reports
- Push notifications for streak milestones

---

**Author:** GitHub Copilot  
**Date:** October 15, 2025  
**Version:** 1.0
